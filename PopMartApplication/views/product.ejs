<%- include("partials/header", { title: "Product Details" }) %>

<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:14px;">
  <span class="role-tag">Buyer view</span>
</div>

<section class="card fade-in">
  <div class="list-item">
    <img class="thumb" src="<%= product.image %>" alt="Product image" />
    <div class="stack">
      <h2 style="margin:0;"><%= product.name %></h2>
      <div style="display:flex; gap:8px; flex-wrap:wrap;">
        <span class="pill"><%= product.category %></span>
      </div>
      <p class="muted"><%= product.fullDesc || product.shortDesc %></p>
      <strong class="mono"><%= product.priceEth %> ETH</strong>
    </div>
  </div>
</section>

<section class="card fade-in" style="margin-top:18px;">
  <h2 style="margin-top:0;">Ratings for this Product</h2>
  <div class="list">
    <% if (!ratings.length) { %>
      <p class="muted">No ratings yet.</p>
    <% } %>
    <% ratings.forEach(function(rating) { %>
      <div class="card" style="margin-top:10px;">
        <div class="stack">
          <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap;">
            <span class="pill">Buyer: <%= rating.buyerName || "Buyer" %></span>
            <span class="pill">Order <%= rating.orderId %></span>
            <span class="pill"><%= rating.createdAtDisplay || "Pending" %></span>
          </div>
          <strong><%= rating.stars %> stars</strong>
          <span class="muted"><%= rating.comment || "No comment provided." %></span>
        </div>
      </div>
    <% }) %>
  </div>
</section>

<div style="display:flex; justify-content:flex-end; margin-top:18px;">
  <a class="btn btn-outline" href="/">Back to listings</a>
</div>

<%- include("partials/footer") %>
